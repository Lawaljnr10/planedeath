<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HTML5 Space Shooter Game</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: #000;
      font-family: sans-serif;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <script>
    // Set up the canvas and context
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Adjust canvas size on window resize
    window.addEventListener("resize", () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      // Optionally reposition or reset game objects here if needed.
    });

    // Define the player (spaceship)
    const player = {
      x: canvas.width / 2,
      y: canvas.height - 60,
      width: 40,
      height: 40,
      speed: 5,
      movingLeft: false,
      movingRight: false,
      movingUp: false,
      movingDown: false,
      shootCooldown: 0
    };

    // Arrays for projectiles and asteroids
    let projectiles = [];
    let asteroids = [];

    // Listen for keyboard events
    document.addEventListener("keydown", (e) => {
      if (e.code === "ArrowLeft") player.movingLeft = true;
      if (e.code === "ArrowRight") player.movingRight = true;
      if (e.code === "ArrowUp") player.movingUp = true;
      if (e.code === "ArrowDown") player.movingDown = true;
      if (e.code === "Space") {
        if (player.shootCooldown <= 0) {
          projectiles.push({ x: player.x, y: player.y, speed: 7 });
          player.shootCooldown = 15; // frames between shots
        }
      }
    });
    document.addEventListener("keyup", (e) => {
      if (e.code === "ArrowLeft") player.movingLeft = false;
      if (e.code === "ArrowRight") player.movingRight = false;
      if (e.code === "ArrowUp") player.movingUp = false;
      if (e.code === "ArrowDown") player.movingDown = false;
    });

    // Draw the player with a linear gradient for a polished look
    function drawPlayer() {
      ctx.save();
      ctx.translate(player.x, player.y);
      const gradient = ctx.createLinearGradient(-player.width / 2, 0, player.width / 2, 0);
      gradient.addColorStop(0, "#ff0"); // Yellow
      gradient.addColorStop(1, "#f00"); // Red
      ctx.fillStyle = gradient;
      ctx.beginPath();
      // Draw a triangle (spaceship)
      ctx.moveTo(0, -player.height / 2);
      ctx.lineTo(-player.width / 2, player.height / 2);
      ctx.lineTo(player.width / 2, player.height / 2);
      ctx.closePath();
      ctx.fill();
      ctx.restore();
    }

    // Draw projectiles as simple circles
    function drawProjectiles() {
      ctx.fillStyle = "#0ff"; // Cyan color
      projectiles.forEach((proj) => {
        ctx.beginPath();
        ctx.arc(proj.x, proj.y, 5, 0, Math.PI * 2);
        ctx.fill();
      });
    }

    // Draw asteroids with radial gradients for depth
    function drawAsteroids() {
      asteroids.forEach((ast) => {
        const rad = ast.radius;
        const grad = ctx.createRadialGradient(ast.x, ast.y, rad * 0.3, ast.x, ast.y, rad);
        grad.addColorStop(0, "#888"); // Lighter gray at the center
        grad.addColorStop(1, "#222"); // Dark gray at the edges
        ctx.fillStyle = grad;
        ctx.beginPath();
        ctx.arc(ast.x, ast.y, rad, 0, Math.PI * 2);
        ctx.fill();
      });
    }

    // Update positions and handle game logic
    function update() {
      // Move the player based on key presses
      if (player.movingLeft && player.x - player.width / 2 > 0) player.x -= player.speed;
      if (player.movingRight && player.x + player.width / 2 < canvas.width) player.x += player.speed;
      if (player.movingUp && player.y - player.height / 2 > 0) player.y -= player.speed;
      if (player.movingDown && player.y + player.height / 2 < canvas.height) player.y += player.speed;
      if (player.shootCooldown > 0) player.shootCooldown--;

      // Update projectile positions
      projectiles.forEach((proj, index) => {
        proj.y -= proj.speed;
        // Remove projectiles that move off-screen
        if (proj.y < 0) {
          projectiles.splice(index, 1);
        }
      });

      // Randomly generate new asteroids
      if (Math.random() < 0.02) {
        const radius = Math.random() * 20 + 20;
        const x = Math.random() * (canvas.width - radius * 2) + radius;
        asteroids.push({
          x: x,
          y: -radius,
          radius: radius,
          speed: Math.random() * 2 + 1
        });
      }

      // Update asteroid positions
      asteroids.forEach((ast, index) => {
        ast.y += ast.speed;
        // Remove asteroids that have moved off-screen
        if (ast.y - ast.radius > canvas.height) {
          asteroids.splice(index, 1);
        }
      });

      // Check collisions between projectiles and asteroids
      projectiles.forEach((proj, pIndex) => {
        asteroids.forEach((ast, aIndex) => {
          const dx = proj.x - ast.x;
          const dy = proj.y - ast.y;
          const distance = Math.sqrt(dx * dx + dy * dy);
          if (distance < ast.radius + 5) { // Collision detected
            projectiles.splice(pIndex, 1);
            asteroids.splice(aIndex, 1);
          }
        });
      });
    }

    // Main game loop using requestAnimationFrame for smooth animations
    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      update();
      drawPlayer();
      drawProjectiles();
      drawAsteroids();
      requestAnimationFrame(gameLoop);
    }

    // Start the game loop
    gameLoop();
  </script>
</body>
</html>
